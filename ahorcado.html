<HTML>
<HEAD>
<TITLE>Ahorcado</TITLE>
<style type="text/css">
   #image {
  height: 256px;
  width: 200px;
background: 
url('./recursos_Graficos/Ahorcado_sprintline.png') 0px 0px;
}
</style>

<SCRIPT LANGUAGE=JavaScript>

var palabra
var partes = 0
var colNueva = 0
var jugando


function ObtienePalabra() {
  
   var cadena = new String(visor.textoahorcado.value)
   palabra = cadena.split("")

}


function DibujaHombre() {
  var posicion = partes*-200;
  var idDibujito =  document.getElementById("image");
  idDibujito.style.backgroundPosition =posicion+' 0px';

}


function DibujaLetra(visor, letra) {
   
   var flag = false 
  
   var cadena = new String(visor.displayPalabra.value)
 
   var letrasCadena = cadena.split(" ")
   cadena = "" 
   for (var x = 0; x < palabra.length; x++) {
      if (palabra[x] == letra) {
         cadena += letra + " "
         flag = true
      } else
         cadena += letrasCadena[x] + " "
   }
   visor.displayPalabra.value = cadena
   return flag
}


function NuevaLetra(visor, letra) {

   visor.displayLetras.value += letra + " "

   if(colNueva == 3) {
      visor.displayLetras.value += "\n"
      colNueva = 0
   } else
      colNueva++
}

function Juega(visor, letra) {

   if (jugando) {
     
      NuevaLetra(visor, letra)
     
      var acierto = DibujaLetra(visor, letra)
    console.log(acierto);
      if (acierto==false)
        partes++;
         DibujaHombre()
         if (partes == 8)
        //console.log(partes)
         FinJuego(true)
      else if (CompruebaPalabra(visor))
         FinJuego(true)
      } else {
         alert('Pulsa Juego nuevo para comenzar una partida nueva.')
   }
  console.log(partes)
}

function IniciaJuego(visor) {
   jugando = true
   partes = 0
   colNueva = 0
   ObtienePalabra()
   
   visor.displayPalabra.value = ""
   for (var x = 0; x < palabra.length; x++)
      visor.displayPalabra.value += "_ "
   visor.displayLetras.value = ""
}

function CompruebaPalabra(visor) {
  
   var fin = true
   var cadena = new String(visor.displayPalabra.value)
   var letrasCadena = cadena.split(" ")
   for(var x = 0; x < letrasCadena.length; x++)
      if (letrasCadena[x] == "_")
         fin = false
   return fin
}


function FinJuego(resultado) {
   
   var solucion = ""
   jugando = false 
   if (resultado) {
      document.visor.ganadas.value++
      for (var x = 0; x < palabra.length; x++)
       solucion += palabra[x]
      alert("gano la palabra es:" + solucion)
   } else {
     document.visor.perdidas.value++
     for (var x = 0; x < palabra.length; x++)
        solucion += palabra[x]
     alert("perdio La palabra era: " + solucion)
   }
}

</SCRIPT>
</HEAD>
<BODY>
<H2>Ahorcado</H2>
<FORM NAME=visor>

   Colocar palabra: <INPUT id="textoahorcado" type="password" NAME=textoahorcado SIZE=50>
   <CENTER>
   <TABLE width=600>
   <TR>
      <TD colspan=3 width=150 ALIGN=center><img id="image" >
      <TD colspan=3 WIDTH=150 ALIGN=center><textarea name=displayLetras cols=15 rows=6></textarea>
      <TD width=200>
   <TR>
      <TD colspan=6 width=300 ALIGN=center><INPUT NAME=displayPalabra SIZE=42>
      <TD ALIGN=center>;
   <TR>
      <td align=center width=50><input type=button name=botA value=" A " onClick="Juega(this.form, 'a')">
      <td align=center width=50><input type=button name=botB value=" B " onClick="Juega(this.form, 'b')">
      <td align=center width=50><input type=button name=botC value=" C " onClick="Juega(this.form, 'c')">
      <td align=center width=50><input type=button name=botD value=" D " onClick="Juega(this.form, 'd')">
      <td align=center width=50><input type=button name=botE value=" E " onClick="Juega(this.form, 'e')">
      <td align=center width=50><input type=button name=botF value=" F " onClick="Juega(this.form, 'f')">
      <td>
    <tr>
      <td align=center><input type=button name=botG value=" G " onClick="Juega(this.form, 'g')">
      <td align=center><input type=button name=botH value=" H " onClick="Juega(this.form, 'h')">
      <td align=center><input type=button name=botI value=" I " onClick="Juega(this.form, 'i')">
      <td align=center><input type=button name=botJ value=" J " onClick="Juega(this.form, 'j')">
      <td align=center><input type=button name=botK value=" K " onClick="Juega(this.form, 'k')">
      <td align=center><input type=button name=botL value=" L " onClick="Juega(this.form, 'l')">
      <td align=right valign=middle>Ganadas: <input type=text name=ganadas size=4 value=0>
    <tr>
      <td align=center><input type=button name=botM value=" M " onClick="Juega(this.form, 'm')">
      <td align=center><input type=button name=botN value=" N " onClick="Juega(this.form, 'n')">
      <td align=center><input type=button name=botÑ value=" Ñ " onClick="Juega(this.form, 'ñ')">
      <td align=center><input type=button name=botO value=" O " onClick="Juega(this.form, 'o')">
      <td align=center><input type=button name=botP value=" P " onClick="Juega(this.form, 'p')">
      <td align=center><input type=button name=botQ value=" Q " onClick="Juega(this.form, 'q')">
      <td align=right valign=middle>Perdidas: <input type=text name=perdidas size=4 value=0>
    <tr>
      <td align=center><input type=button name=botR value=" R " onClick="Juega(this.form, 'r')">
      <td align=center><input type=button name=botS value=" S " onClick="Juega(this.form, 's')">
      <td align=center><input type=button name=botT value=" T " onClick="Juega(this.form, 't')">
      <td align=center><input type=button name=botU value=" U " onClick="Juega(this.form, 'u')">
      <td align=center><input type=button name=botV value=" V " onClick="Juega(this.form, 'v')">
      <td align=center><input type=button name=botW value=" W " onClick="Juega(this.form, 'w')">
      <td>
    <tr>
      <td align=center><input type=button name=botX value=" X " onClick="Juega(this.form, 'x')">
      <td align=center><input type=button name=botY value=" Y " onClick="Juega(this.form, 'y')">
      <td align=center><input type=button name=botZ value=" Z " onClick="Juega(this.form, 'z')">
      <td colspan=3 align=center><input type=button name=Inicia value="  Juego nuevo   " onClick="IniciaJuego(this.form)">
      <td align=center><input type=button value=Limpiar name=B1 onClick="this.form.ganadas.value='0'; this.form.perdidas.value='0'">
  </TABLE>
  </CENTER>
</FORM>

</BODY>
</HTML>